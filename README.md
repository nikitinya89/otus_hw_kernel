# Otus Homework 1. Kernel update

### Домашнее задание
Обновить ядро в базовой системе

**Цель:**  
Получить навыки работы с Git, Vagrant;
Обновлять ядро в ОС Linux.

**Задание**
- Создать Vagrantfile, в который будет разворачивать ВМ
- Обновить ядро

## Выполнение
Домашнее задание выполнялось для ОС **Centos 7** и **Ubuntu 22.04**. Vagrantfile для обеих ВМ размещены в соответсвующих папках.  
  
Обновление ядра осуществляется с помощью запуска скриптов в **vagrant provision**.  Боксы были скачены из Vagrant Cloud, соотвественно выполнение команды **vagrant up** должно осуществляться при ***подключенном VPN-соединении***.

### kernel-update.sh Centos 7
- Проверяется текущая версия ядра и записывается в файл *kernel.txt*  
- Подключается репозиторий *elrepo-kernel*
- Устанавливается ядро из репозитория  
- Обновляется конфигурация загрузчика  
- Новое ядро выбирается для загрузки по умолчанию  
### kernel-update.sh Ubuntu 22.04
- Проверяется текущая версия ядра и записывается в файл *kernel.txt*  
- Скачиваются файлы *linux-headers*, *linux-image* и *linux-modules*
- Устанавливается ядро из скаченных файлов  
- Исправлется ошибки зависимостей
- Удаляются скаченные файлы
- Обновляется загрузчик
  
ВМ перезагружется с помощью [плагина vagrant-reload](https://github.com/aidanns/vagrant-reload)  
```
vagrant plugin install vagrant-reload
```
### check-verison.sh
- Проверяется версия ядра и дописывается в файл kernel.txt

В результате мы получим файл **kernel.txt** в папке */home/vagrant/* в котором будет написана исходная и текущая версия ядра
```
Old kernel verion is: 3.10.0-1127.el7.x86_64
New kernel verion is: 6.7.9-1.el7.elrepo.x86_64
```
